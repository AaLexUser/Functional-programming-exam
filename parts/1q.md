# 1. Чистые и грязные функции. Изменяемое состояние. Тотальность функций.

## Чистые функции

```{glossary}
Чистая функция
    это функция, которая всегда возвращает **одинаковый результат** для одних и тех же входных данных и **не имеет побочных эффектов**.
```

```{dropdown} Пенской А.В.
> Это функция, которая отображает одно множество из области элементов, множество определений, множество значений.
> То есть у нас есть входные аргументы, которые строго заданы, и они должны однозначно давать нам понимание о том, какой должен быть результат.
```

### Характеристики

- **Детерминированность:**
    Для одинаковых входных данных функция всегда возвращает одинаковый результат.
- **Отсутствие побочных эффектов:**
    Функция не изменяет состояние программы, не модифицирует внешние переменные, не выполняет ввод/вывод (I/O), не изменяет глобальное состояние и т.д.

## Грязные функции

```{glossary}
Грязная функция
    Зависит от **внешнего состояния** (например, глобальных переменных, ввода/вывода) или вызывает **побочные эффекты** (изменяет данные, взаимодействует с внешним миром).
```

## Изменяемое состояние

```{glossary}
Изменяемое состояние
    это состояние программы, которое может изменяться в процессе выполнения. В *функциональном программировании* стараются **минимизировать** использование изменяемого состояния, чтобы избежать сложностей с отслеживанием изменений и побочных эффектов.
```

## Immutable vs Mutable структуры данных

### Преимущества

- Обеспечивает **безопасный совместный доступ** - нет необходимости в операциях клонирования
- Позволяет **тривиальный откат** изменений, например, операции отмены, обратный путь, обработка исключений
- Автоматическая **защита от гонок данных** при параллельном программировании
- Более простые **GC (Garbage Collection)** и **STM (Software Transactional Memory)**
- Рекурсивная организация и обработка? (для функциональщиков проще рекурсии, для остальных итерации)

### Недостатки

- Более **высокая worst-case complexity** по сравнению с лучшими императивными структурами, которые часто несут логарифмические накладные расходы
- **Не** так хорошо **изучены и документированы**
- Требует **управления памятью** (GC или ref counts)
- Вызывает **большее количество allocations** (но не обязательно большее количество мест)

## Тотальность функций

```{glossary}
Тотальность функций
    это свойство функции, которое гарантирует, что **функция определена** (т.е. возвращает результат) **для всех возможных входных данных** из своей области определения.
```
