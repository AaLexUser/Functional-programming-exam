# 5. Ссылочная прозрачность. Сопоставление с образцом

## Ссылочная прозрачность

```{glossary}
Ссылочная прозрачность
    это свойство выражения, когда его можно заменить результатом его вычисления без изменения поведения программы. Это свойство обеспечивает предсказуемость кода и отсутствие побочных эффектов.
```

### Особенности

- Характерно для **чистых функций**.
- Гарантирует, что при одинаковых входных данных функция всегда возвращает одинаковый результат.
- Упрощает тестирование, оптимизацию и параллелизацию кода.

## Сопоставление с образцом

```{glossary}
Сопоставление с образцом (англ. pattern matching)
    это механизм, который позволяет «разбирать» структуру данных, сравнивая её с заданным шаблоном (образцом).
```

**Идея следующая:**

1. У нас есть сложная структура данных (список, кортеж, дерево и т. д.).
2. Мы описываем несколько паттернов (образцов), определяя, как данные должны выглядеть, чтобы попасть под конкретный случай.
3. Среда исполнения «пробует» сопоставить текущие данные с каждым образцом по очереди.
4. При успешном сопоставлении выполняется код, связанный с этим шаблоном.

Сопоставление с образцом широко распространено в функциональных языках, такую возможность во многом открывает **иммутабельность**, потому как сопоставленный образец остается доступным к взаимодействию. Если иммутабельности нет, то непонятно, должна ли быть это **копия или ссылка, сколько она должна жить** и тд. Особенно демонстративны примеры с сопоставлением в цикле.
